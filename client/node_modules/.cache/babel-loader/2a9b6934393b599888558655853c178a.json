{"ast":null,"code":"var _jsxFileName = \"C:\\\\JavascriptProjects2\\\\socketChatApp\\\\client\\\\src\\\\components\\\\entries\\\\message\\\\MessageList.js\";\nimport React, { Component } from 'react';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport Message from './Message';\nimport MessageSketch from './MessageSketch';\nimport TimeTag from '../time-tag/TimeTag';\nexport default class MessageList extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.getItems = () => {\n      const {\n        items\n      } = this.props;\n      const messages = [];\n\n      const aggregatedItems = _.groupBy(items, item => {\n        return moment(item.dataTime).utc().startOf('day').format();\n      });\n\n      _.mapKeys(aggregatedItems, (value, key) => {\n        const item = {\n          items: value\n        };\n        const diff = moment(new Date()).diff(moment(key), 'days');\n\n        if (diff <= 6) {\n          if (diff === 0) {\n            item.timeTag = 'today';\n          } else if (diff === 1) {\n            item.timeTag = 'yesterday';\n          } else {\n            item.timeTag = moment(key).format('ddddd');\n          }\n        } else {\n          item.timeTag = moment(key).format('DD/MM/YYYY');\n        }\n\n        messages.push(item);\n      });\n\n      return messages;\n    };\n  }\n\n  render() {\n    const {\n      isFetching,\n      onMouseOver,\n      onFocus,\n      handleDeleteMessage\n    } = this.props;\n    const messages = this.getItems();\n\n    if (isFetching) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"message-list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(MessageSketch, {\n        left: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(MessageSketch, {\n        right: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-list\",\n      onMouseOver: onMouseOver,\n      onFocus: onFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }\n    }, messages.map((message, key) => {\n      const {\n        timeTag,\n        items\n      } = message;\n      const components = [];\n      components.push( /*#__PURE__*/React.createElement(TimeTag, {\n        key: `time-tag${key}`,\n        text: timeTag,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 37\n        }\n      }));\n      items.forEach((item, key) => {\n        const {\n          _id,\n          message,\n          dateTime,\n          currentUserIsSender,\n          isFetchingAction\n        } = item;\n        components.push( /*#__PURE__*/React.createElement(Message, {\n          key: `message${key}`,\n          right: currentUserIsSender,\n          left: !currentUserIsSender,\n          text: message,\n          time: moment(dateTime).format('HH:mm'),\n          isFetchingAction: isFetchingAction,\n          handleDelete: () => handleDeleteMessage(_id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 41\n          }\n        }));\n      });\n      return components;\n    }));\n  }\n\n}","map":{"version":3,"sources":["C:/JavascriptProjects2/socketChatApp/client/src/components/entries/message/MessageList.js"],"names":["React","Component","_","moment","Message","MessageSketch","TimeTag","MessageList","getItems","items","props","messages","aggregatedItems","groupBy","item","dataTime","utc","startOf","format","mapKeys","value","key","diff","Date","timeTag","push","render","isFetching","onMouseOver","onFocus","handleDeleteMessage","map","message","components","forEach","_id","dateTime","currentUserIsSender","isFetchingAction"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport Message from './Message';\r\nimport MessageSketch from './MessageSketch';\r\nimport TimeTag from '../time-tag/TimeTag';\r\n\r\nexport default class MessageList extends Component{\r\n    getItems = () => {\r\n        const {items} = this.props;\r\n        const messages = [];\r\n\r\n        const aggregatedItems = _.groupBy(items,item => {\r\n            return moment(item.dataTime).utc().startOf('day').format();\r\n           })\r\n\r\n        _.mapKeys(aggregatedItems, (value,key) => {\r\n            const  item = {items: value};\r\n            const diff = moment(new Date()).diff(moment(key),'days');\r\n\r\n            if(diff <= 6){\r\n                if(diff === 0){\r\n                    item.timeTag = 'today';\r\n                } else if(diff === 1){\r\n                    item.timeTag = 'yesterday';\r\n                } else {\r\n                    item.timeTag = moment(key).format('ddddd');\r\n                }\r\n              } else {\r\n                item.timeTag = moment(key).format('DD/MM/YYYY');\r\n             }\r\n\r\n             messages.push(item);\r\n         });\r\n        \r\n        return messages;\r\n    }\r\n\r\n\r\n    render(){\r\n        const {isFetching,onMouseOver,onFocus,handleDeleteMessage} = this.props;\r\n        const messages = this.getItems();\r\n\r\n        if(isFetching){\r\n            return (\r\n                <div className=\"message-list\">\r\n                    <MessageSketch left />\r\n                    <MessageSketch right />\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div className=\"message-list\" onMouseOver={onMouseOver} onFocus={onFocus}>\r\n                {messages.map((message,key) => {\r\n                    const {timeTag,items} = message;\r\n                    const components = [];\r\n                    components.push(<TimeTag key={`time-tag${key}`} text={timeTag} />);\r\n\r\n                    items.forEach((item,key) => {\r\n                        const {_id,message,dateTime,currentUserIsSender,isFetchingAction} = item;\r\n                        components.push(<Message key={`message${key}`} right={currentUserIsSender} left={!currentUserIsSender} \r\n                                                 text={message} time={moment(dateTime).format('HH:mm')} isFetchingAction={isFetchingAction} \r\n                                                 handleDelete={() => handleDeleteMessage(_id)} />)\r\n                                      })\r\n\r\n                    return (components);\r\n                  })}\r\n            </div>\r\n        ) \r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}